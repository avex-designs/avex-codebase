(()=>{const t="media-loader";class e extends HTMLElement{_$elements=[];connectedCallback(){this.querySelectorAll("img, video").forEach((t=>{t instanceof HTMLVideoElement?(t.addEventListener("loadeddata",this._test.bind(this)),t.addEventListener("loadedmetadata",this._test.bind(this)),t.addEventListener("canplay",this._test.bind(this)),t.addEventListener("canplaythrough",this._test.bind(this)),t.addEventListener("playing",this._test.bind(this))):t.addEventListener("load",this._test.bind(this)),this._$elements.push(t)})),this._test()}_test(){if(!this.hasAttribute("ready")){for(let t=0;t<this._$elements.length;t++){const e=this._$elements[t];if(e instanceof HTMLVideoElement&&e.readyState<3||e instanceof HTMLImageElement&&!e.complete)return}this._setReady()}}_setReady(){this.setAttribute("ready","");const e=new CustomEvent(`${t}:ready`);this.dispatchEvent(e)}}customElements.get(t)||customElements.define(t,e)})();